/* ===================================================================
   ESTILOS BASE ‚Äî Edici√≥n Ni√±os (Refactor) (Versi√≥n final por Walter)
   - Modo oscuro por defecto + modo claro con alto contraste
   - Enfoque en visibilidad, accesibilidad y feedback visual
   - Mejoras: animaciones, intentado, botones din√°micos y trail suave
   =================================================================== */
:root {
  --bg: #0b1220;
  --fg: #f8fafc;
  --muted: #cbd5e1;
  --primary: #7dd3fc;  /* celeste alegre */
  --accent: #f472b6;   /* rosado divertido */
  --panel: #0f172a;
  --grid-line: rgba(255,255,255,.09);
  --cols: 8;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Trebuchet MS', 'Comic Sans MS', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color: var(--fg);
  background: radial-gradient(1200px 800px at 20% 0%, #0f1a33, var(--bg));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ----------------- Barra superior ----------------- */
.brand-title {
  margin: 0;
  font-size: clamp(28px, 5vw, 44px);
  letter-spacing: 1.2px;
  text-align: center;
  width: 100%;
  font-weight: 800;
  line-height: 1.1;
  text-shadow: 0 2px 0 rgba(0,0,0,.25);
}

.topbar {
  display:grid; grid-template-columns: 1fr auto;
  align-items:center; gap: 10px;
  padding: 14px 16px; background: rgba(255,255,255,0.03);
  border-bottom: 1px solid rgba(255,255,255,0.06);
  backdrop-filter: blur(6px);
}

.actions { display:flex; gap: 8px; }

.btn {
  border: 2px solid rgba(255,255,255,0.18);
  background: rgba(125,211,252,0.18);
  color: var(--fg);
  padding: 10px 14px; border-radius: 12px; cursor: pointer;
  font-weight: 700;
  display: inline-flex; align-items: center; gap: 8px;
}
/* Estilos de botones m√°s din√°micos (Mejora Walter) */
.btn {
  transition: all 0.25s cubic-bezier(.2,.9,.2,1);
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
}
.btn:hover {
  background: linear-gradient(135deg, var(--primary), #2b90d9);
  color: #fff;
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 8px 22px rgba(0,0,0,.35);
}
.btn:active { transform: scale(0.96); box-shadow: 0 2px 6px rgba(0,0,0,.25); }
.btn-ghost { background: transparent; }

/* ----------------- Layout ----------------- */
.layout {
  display:grid;
  grid-template-columns: 280px 1fr 280px;
  gap: 16px;
  padding: 16px;
}

.panel {
  background: var(--panel);
  border: 2px solid rgba(255,255,255,.1);
  border-radius: 14px;
  padding: 12px;
}

.form-row { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
label { color: var(--muted); font-size: 16px; align-self:center; font-weight: 700; }
input, select {
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,.2);
  background: rgba(255,255,255,0.06);
  color: var(--fg);
  font-size: 16px;
}
input:focus, select:focus { outline: none; border-color: var(--primary); }

/* Entradas inv√°lidas */
input.invalid, select.invalid {
  border-color:#ef4444 !important;
  box-shadow: 0 0 0 3px rgba(239,68,68,.25);
}

/* Globo (tooltip) accesible */
.bubble {
  position: absolute;
  background: #1f2937;
  color: #f8fafc;
  border: 2px solid rgba(255,255,255,.15);
  border-radius: 12px;
  padding: 8px 10px;
  font-size: 14px;
  z-index: 9999;
  transform: translate(-50%, -100%);
  white-space: nowrap;
  pointer-events: none;
}
.bubble::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -8px;
  transform: translateX(-50%);
  border: 8px solid transparent;
  border-top-color: #1f2937;
}

.hint { display:block; color: var(--muted); margin-top: 6px; font-size: 14px; }
/* Recuadro de error (.errors.show) (Mejora Walter) */
.errors {
  background: transparent;
  color: #fecaca;
  min-height: 20px;
  padding: 0;
  border-radius: 10px;
  transition: all .2s ease;
}
.errors.show {
  background: #7f1d1d;      /* rojo oscuro */
  color: #fee2e2;            /* texto claro */
  border: 2px solid #b91c1c; /* borde rojo */
  padding: 10px 12px;
  margin-top: 8px;
  font-weight: 700;
  box-shadow: 0 4px 16px rgba(185,28,28,.35);
}

/* ----------------- Juego ----------------- */
.game .hud {
  display:flex; gap: 16px; margin-bottom: 10px; align-items:center;
}
.stat {
  background: rgba(255,255,255,.10);
  border: 2px solid rgba(255,255,255,.15);
  padding: 8px 12px; border-radius: 10px; font-weight: 800;
}

.grid {
  --gap: 8px;
  display: grid;
  grid-template-columns: repeat(var(--cols), minmax(0, 1fr));
  gap: var(--gap);
  width: 100%;
  aspect-ratio: 1.6/1;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border: 3px solid var(--grid-line);
  border-radius: 14px;
  padding: var(--gap);
  position: relative;
}

.cell {
  position: relative;
  border-radius: 12px;
  display:flex; align-items:center; justify-content:center;
  user-select:none; cursor:pointer;
  background: rgba(255,255,255,.08);
  border: 2px solid rgba(255,255,255,.18);
  transition: transform .08s, background .2s, box-shadow .18s;
  font-size: clamp(18px, 3vw, 26px);
}
.cell:active { transform: scale(.98); }

/* Hover en celdas (Mejora Walter) */
.cell:hover {
  background: rgba(125,211,252,0.14);
  transform: scale(1.06);
  z-index: 2;
}

/* --- Estados de las Celdas --- */

/* Celda Copi√≥n (Activa) con animaci√≥n (Mejora Walter) */
.cell.copion {
  outline: 3px solid var(--accent);
  box-shadow: inset 0 0 18px rgba(250,204,21,.35), 0 0 16px rgba(244,114,182,.35);
  background: rgba(244,114,182,.18);
  animation: pulse 0.8s ease-out; /* Animaci√≥n de pulso */
}
@keyframes pulse {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.14); }
  100% { transform: scale(1); }
}

.cell .emoji { filter: drop-shadow(0 0 6px rgba(255,255,255,.5)); }

/* Celda Intentada (Letra ya revisada, o estado por defecto) (Mejora Walter) */
.cell.intentado {
  background: rgba(148,163,184,.20); /* gris azulado suave */
  border-color: rgba(148,163,184,.45);
  color: var(--muted);
  transform: none;
}

/* Fallo visual (Flash rojo al clickear mal) */
.cell.miss { background: rgba(239,68,68,.22); }

/* Rastro üëÄ: la versi√≥n con transici√≥n (override de la animaci√≥n original) */
.trail {
  position: absolute; inset: 0; display:flex; align-items:center; justify-content:center;
  pointer-events: none;
  font-size: clamp(18px, 3vw, 26px);
  opacity: 1;
  transition: opacity 1.9s ease-out, transform 1.9s ease-out;
}
/* Esta parte maneja la animaci√≥n de desvanecimiento */
.trail:not(.show) { opacity: 0; transform: scale(1.2); }

/* Toast (Mensaje breve, como "Tiempo terminado") */
.toast {
  position: fixed; left: 50%; top: 20px; transform: translateX(-50%);
  background: rgba(15,23,42,.95); color: #e5e7eb; border: 2px solid rgba(255,255,255,.18);
  padding: 10px 14px; border-radius: 12px; z-index: 9999; font-weight: 800;
}

/* ----------------- Historial ----------------- */
.history { list-style: none; padding-left: 0; margin: 0; max-height: 320px; overflow: auto; }
.history li { padding: 6px 8px; border-bottom: 1px dashed rgba(255,255,255,.03); font-weight: 700; }

/* ----------------- Modo claro con alto contraste ----------------- */
body.light-mode {
  --bg: #f7fafc;
  --fg: #0f172a;
  --muted: #334155;
  --panel: #ffffff;
  --primary: #2563eb;
  --accent: #f97316; /* naranja intenso */
  --grid-line: rgba(37,99,235,.55);
  background: radial-gradient(1200px 800px at 20% 0%, #eaf2ff, var(--bg));
}
body.light-mode .panel { border-color: rgba(15,23,42,.1); }
body.light-mode .grid {
  background: linear-gradient(180deg, rgba(37,99,235,.08), rgba(99,102,241,.05));
  border-color: var(--grid-line);
}
body.light-mode .cell {
  background: rgba(37,99,235,.08);
  border-color: rgba(15,23,42,.12);
}
body.light-mode .cell.copion {
  outline-color: var(--accent);
  background: rgba(249,115,22,.16);
  box-shadow: inset 0 0 18px rgba(37,99,235,.30), 0 0 14px rgba(249,115,22,.35);
}
body.light-mode .toast { background: #111827; color:#f9fafb; }

/* ----------------- Responsive (Mejora Walter) ----------------- */
@media (max-width: 980px) {
  /* En pantallas medianas/tabletas, los paneles laterales se apilan */
  .layout { grid-template-columns: 1fr; }
  .brand-title { font-size: clamp(28px, 8vw, 44px); }
}

@media (max-width: 600px) {
  /* En m√≥viles, ajustamos el tablero y los botones */
  .actions { flex-wrap: wrap; justify-content: center; }
  .btn { flex: 1; min-width: 120px; margin-top: 6px; }
  .panel { font-size: 14px; }
  .stat { flex: 1; text-align: center; }
  .grid { aspect-ratio: 1/1; } /* Hacer la grilla m√°s cuadrada en m√≥vil */
  .cell { font-size: clamp(14px, 4vw, 18px); }
}